<Window x:Class="AupRename.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AupRename"
        xmlns:properties="clr-namespace:AupRename.Properties"
        mc:Ignorable="d"
        Title="AupRename" Height="164" Width="420" AllowDrop="True" Drop="Window_Drop" PreviewDragOver="Window_PreviewDragOver" SizeToContent="Height" Closing="Window_Closing">
    <Window.DataContext>
        <local:MainViewModel/>
    </Window.DataContext>
    <Window.InputBindings>
        <KeyBinding Command="{Binding OpenFileCommand}" Gesture="Ctrl+O"/>
        <KeyBinding Command="{Binding RepackCommand}" Gesture="Ctrl+P"/>
    </Window.InputBindings>
    <Window.Resources>
        <local:LanguageEqualsConverter x:Key="LanguageEqualsConverter"/>
    </Window.Resources>
    <DockPanel LastChildFill="True">
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_File}">
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Open}" Command="{Binding OpenFileCommand}" InputGestureText="Ctrl+O"/>
                <Separator/>
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Quit}" Command="{Binding ShutdownCommand}" InputGestureText="Alt+F4"/>
            </MenuItem>
            <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Edit}" Click="MenuItem_Click">
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_NewEdit}" Command="{Binding RepackCommand}" InputGestureText="Ctrl+P"/>
            </MenuItem>
            <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Language}">
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Language_Default}"
                          Command="{Binding ChangeLanguageCommand}"
                          CommandParameter=""
                          IsCheckable="True">
                    <MenuItem.IsChecked>
                        <MultiBinding Converter="{StaticResource LanguageEqualsConverter}" Mode="OneWay">
                            <Binding Path="Language"/>
                            <Binding RelativeSource="{RelativeSource Self}" Path="CommandParameter"/>
                        </MultiBinding>
                    </MenuItem.IsChecked>
                </MenuItem>
                <MenuItem Header="日本語"
                          Command="{Binding ChangeLanguageCommand}"
                          CommandParameter="ja-JP"
                          IsCheckable="True">
                    <MenuItem.IsChecked>
                        <MultiBinding Converter="{StaticResource LanguageEqualsConverter}" Mode="OneWay">
                            <Binding Path="Language"/>
                            <Binding RelativeSource="{RelativeSource Self}" Path="CommandParameter"/>
                        </MultiBinding>
                    </MenuItem.IsChecked>
                </MenuItem>
                <MenuItem Header="English"
                          Command="{Binding ChangeLanguageCommand}"
                          CommandParameter="en-US"
                          IsCheckable="True">
                    <MenuItem.IsChecked>
                        <MultiBinding Converter="{StaticResource LanguageEqualsConverter}" Mode="OneWay">
                            <Binding Path="Language"/>
                            <Binding RelativeSource="{RelativeSource Self}" Path="CommandParameter"/>
                        </MultiBinding>
                    </MenuItem.IsChecked>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_Help}">
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_OpenUrl}" Command="{Binding OpenUrlCommand}"/>
                <MenuItem Header="{x:Static properties:Resources.MainWindow_Menu_About}" Command="{Binding ShowVersionCommand}"/>
            </MenuItem>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom">
            <Label Content="{Binding Status}" Height="29"/>
        </StatusBar>
        <StackPanel>
            <GroupBox Header="{x:Static properties:Resources.MainWindow_AupHeader}">
                <Grid>
                    <Label Content="{x:Static properties:Resources.MainWindow_AupPath}" HorizontalAlignment="Left"/>
                    <TextBox TextWrapping="Wrap" VerticalAlignment="Center" Margin="34,0,41,0" Text="{Binding Filename}"/>
                    <Button Content="{x:Static properties:Resources.MainWindow_AupButton}" VerticalAlignment="Center" HorizontalAlignment="Right" Width="40" Command="{Binding OpenFileCommand}"/>
                </Grid>
            </GroupBox>
            <StackPanel VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,5,0,5" Orientation="Horizontal" FlowDirection="LeftToRight">
                <Button Content="{x:Static properties:Resources.MainWindow_ButtonNewEdit}" Padding="12,1,12,1" Margin="0,0,12,0" Command="{Binding RepackCommand}"/>
            </StackPanel>
        </StackPanel>
    </DockPanel>
</Window>
